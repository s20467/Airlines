create table account (id integer generated by default as identity, email varchar(255), owner_type integer, password varchar(255), role integer, primary key (id));
create table airplane (id integer generated by default as identity, brand varchar(255), last_technical_review_date date, max_cargo_weight_in_kg integer, max_passengers_number integer, model varchar(255), primary key (id));
create table airport (id integer generated by default as identity, city varchar(255), country varchar(255), street varchar(255), primary key (id));
create table client (id integer generated by default as identity, city varchar(255), country varchar(255), street varchar(255), first_name varchar(255), last_name varchar(255), telephone_number varchar(255), account_id integer, primary key (id));
create table employee (dtype varchar(31) not null, id integer generated by default as identity, city varchar(255), country varchar(255), street varchar(255), first_name varchar(255), last_name varchar(255), telephone_number varchar(255), dismissal_date date, hire_date date, month_salary double, certification_obtaining_date date, account_id integer, primary key (id));
create table partner_company (id integer generated by default as identity, city varchar(255), country varchar(255), street varchar(255), email varchar(255), name varchar(255), account_id integer, primary key (id));
create table passenger_flight (id integer generated by default as identity, date date, status varchar(255), flight_line_id integer, primary key (id));
create table passenger_flight_booking (id integer generated by default as identity, cancelling_time timestamp, creation_time timestamp, status varchar(255), flight_id integer, passenger_client_id integer, primary key (id));
create table scheduled_flight_line_day_of_week (scheduled_flight_line_id integer not null, flight_days varchar(255));
create table scheduled_flight_line (dtype varchar(31) not null, id integer generated by default as identity, arrival_time time, departure_time time, cost_in_dollars double, cost_for_kg_in_dollars double, airplane_id integer, airport_from_id integer, airport_to_id integer, primary_pilot_id integer, secondary_pilot_id integer, account_id integer, primary key (id));
create table transport_flight (id integer generated by default as identity, date date, status varchar(255), flight_line_id integer, primary key (id));
create table transport_flight_booking (id integer generated by default as identity, cancelling_time timestamp, creation_time timestamp, status varchar(255), transported_product_name varchar(255), transported_product_weight double, company_id integer, flight_id integer, primary key (id));
alter table client add constraint account_client_fk foreign key (account_id) references account;
alter table employee add constraint account_employee_fk foreign key (account_id) references account;
alter table partner_company add constraint account_partner_company_fk foreign key (account_id) references account;
alter table passenger_flight add constraint scheduled_flight_line_passenger_flight_fk foreign key (flight_line_id) references scheduled_flight_line;
alter table passenger_flight_booking add constraint passenger_flight_passenger_flight_booking_fk foreign key (flight_id) references passenger_flight;
alter table passenger_flight_booking add constraint client_passenger_flight_booking_fk foreign key (passenger_client_id) references client;
alter table scheduled_flight_line_day_of_week add constraint scheduled_flight_line_day_of_week_fk foreign key (scheduled_flight_line_id) references scheduled_flight_line;
alter table scheduled_flight_line add constraint airplane_scheduled_flight_line_fk foreign key (airplane_id) references airplane;
alter table scheduled_flight_line add constraint airport_scheduled_flight_line_from_fk foreign key (airport_from_id) references airport;
alter table scheduled_flight_line add constraint airport_scheduled_flight_line_to_fk foreign key (airport_to_id) references airport;
alter table scheduled_flight_line add constraint employee_scheduled_flight_line_primary_pilot_fk foreign key (primary_pilot_id) references employee;
alter table scheduled_flight_line add constraint employee_scheduled_flight_line_secondary_pilot_fk foreign key (secondary_pilot_id) references employee;
alter table scheduled_flight_line add constraint account_scheduled_flight_line_account_fk foreign key (account_id) references account;
alter table transport_flight add constraint scheduled_flight_line_transport_flight_fk foreign key (flight_line_id) references scheduled_flight_line;
alter table transport_flight_booking add constraint partner_company_transport_flight_booking_fk foreign key (company_id) references partner_company;
alter table transport_flight_booking add constraint transport_flight_transport_flight_booking_fk foreign key (flight_id) references transport_flight;

insert into account (id, email, password, owner_type, role) values (default, 'jannowak@email.com', '$2a$10$taRYZILsD1.n4EaXHiBcN.QYl6fI2pVxKXoCmHHUhDJCltGySgvZ6', 0, 0);
insert into client (id, first_name, last_name, country, city, street, telephone_number, account_id) values (default, 'Jan', 'Nowak', 'Polska', 'Warszawa', 'ulica', '222222222', 1);
insert into account (id, email, password, owner_type, role) values (default, 'johnsmith@email.com', '$2a$10$31jziauLVcsa5RSDEb1OB.r.XVJpc7IiGuZsl6VQ4IfEOcReVoq5S', 0, 0);
insert into account (id, email, password, owner_type, role) values (default, 'admin', '$2a$10$31jziauLVcsa5RSDEb1OB.r.XVJpc7IiGuZsl6VQ4IfEOcReVoq5S', null, 3);
insert into client (id, first_name, last_name, country, city, street, telephone_number, account_id) values (default, 'John', 'Smith', 'Polska', 'Warszawa', 'ulica', '333333333', 2);
insert into airplane (id, brand, model, last_technical_review_date, max_cargo_weight_in_kg, max_passengers_number) values (default, 'Boeing', '737-800', '2022-06-01', 50000, 500);
insert into airport (id, city, country, street) values (default, 'Polska', 'Wrocław', 'Graniczna 190');
insert into airport (id, city, country, street) values (default, 'Polska', 'Warszawa', 'Żwirki i Wigury');
insert into employee (id, first_name, last_name, city, country, street, telephone_number, dismissal_date, hire_date, month_salary, certification_obtaining_date, dtype) values (default, 'Kazimierz', 'Nowak', 'Warszawa', 'Polska', 'ulica', '111111111', null, '2022-06-01', 20000, '2010-06-01', 'Pilot');
insert into employee (id, first_name, last_name, city, country, street, telephone_number, dismissal_date, hire_date, month_salary, certification_obtaining_date, dtype) values (default, 'Jan', 'Kowalski', 'Warszawa', 'Polska', 'ulica', '000000000', null, '2022-06-01', 20000, '2010-06-01', 'Pilot');
insert into scheduled_flight_line (id, airplane_id, airport_from_id, airport_to_id, departure_time, arrival_time, primary_pilot_id, secondary_pilot_id, cost_in_dollars, dtype) values (default, 1, 1, 2, '16:50', '17:48', 1, 2, 20, 'PassengerScheduledFlightLine');
insert into passenger_flight (id, date, flight_line_id, status) values (default, '2022-08-01', 1, 'PLANNED');
insert into passenger_flight (id, date, flight_line_id, status) values (default, '2022-08-02', 1, 'PLANNED');
insert into passenger_flight (id, date, flight_line_id, status) values (default, '2022-08-03', 1, 'PLANNED');
insert into scheduled_flight_line (id, airplane_id, airport_from_id, airport_to_id, departure_time, arrival_time, primary_pilot_id, secondary_pilot_id, cost_in_dollars, dtype) values (default, 1, 2, 1, '13:45', '14:45', 2, 1, 20, 'PassengerScheduledFlightLine');
insert into passenger_flight (id, date, flight_line_id, status) values (default, '2022-08-01', 2, 'PLANNED');
insert into passenger_flight (id, date, flight_line_id, status) values (default, '2022-08-02', 2, 'PLANNED');
insert into passenger_flight (id, date, flight_line_id, status) values (default, '2022-08-03', 2, 'PLANNED');

